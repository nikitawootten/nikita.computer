<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="rgb(255,255,255)"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API &#183; nikita.computer</title><meta name=title content="Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API &#183; nikita.computer"><meta name=description content="So, your ISP won&rsquo;t give you a static IP address for your burgeoning homelab&rsquo;s network?"><link rel=canonical href=https://nikita.computer/posts/simple-ddns-k8s-cronjob/><link type=text/css rel=stylesheet href=/css/main.bundle.min.de685598dae7a9e7a540ff3b1f5d16bb924e71c7b3f6366fa69c80d698dcc53f520e285bd65c9414ca32bfecd38caeaf06a1ea2733e27cb1b09ed3fc3642df69.css integrity="sha512-3mhVmNrnqeelQP87H10Wu5JOccez9jZvppyA1pjcxT9SDihb1lyUFMoyv+zTjK6vBqHqJzPifLGwntP8NkLfaQ=="><script type=text/javascript src=/js/appearance.min.c6198a5ecbc6c7b35a8568d29315f50cf5d775d4461c515a476359767f1a745c245aa83fa96b0c7d83da976cf77481e1fc29537a2391a53ffe69a991638802e6.js integrity="sha512-xhmKXsvGx7NahWjSkxX1DPXXddRGHFFaR2NZdn8adFwkWqg/qWsMfYPal2z3dIHh/ClTeiORpT/+aamRY4gC5g=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.6d78c827ca7bcbf72056dbf698bf9aeb759a08966686187deb23f5949f73eca5f39b461284900cdfc08e2976d99eb80a8663648de778ba2a83e633ae16dbfc25.js integrity="sha512-bXjIJ8p7y/cgVtv2mL+a63WaCJZmhhh96yP1lJ9z7KXzm0YShJAM38COKXbZnrgKhmNkjed4uiqD5jOuFtv8JQ==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API"><meta property="og:description" content="So, your ISP won&rsquo;t give you a static IP address for your burgeoning homelab&rsquo;s network?"><meta property="og:type" content="article"><meta property="og:url" content="https://nikita.computer/posts/simple-ddns-k8s-cronjob/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-01T22:49:07-05:00"><meta property="article:modified_time" content="2022-12-01T22:49:07-05:00"><meta property="og:site_name" content="nikita.computer"><meta name=twitter:card content="summary"><meta name=twitter:title content="Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API"><meta name=twitter:description content="So, your ISP won&rsquo;t give you a static IP address for your burgeoning homelab&rsquo;s network?"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API","headline":"Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API","abstract":"So, your ISP won\u0026rsquo;t give you a static IP address for your burgeoning homelab\u0026rsquo;s network?","inLanguage":"en","url":"https:\/\/nikita.computer\/posts\/simple-ddns-k8s-cronjob\/","author":{"@type":"Person","name":"Nikita Wootten"},"copyrightYear":"2022","dateCreated":"2022-12-01T22:49:07-05:00","datePublished":"2022-12-01T22:49:07-05:00","dateModified":"2022-12-01T22:49:07-05:00","keywords":["homelab","kubernetes","cloudflare","dns","tutorial"],"mainEntityOfPage":"true","wordCount":"1386"}]</script><meta name=author content="Nikita Wootten"><link href=mailto:stdin@nikita.computer rel=me><link href=https://github.com/nikitawootten rel=me><link href=https://github.com/nikitawootten-nist rel=me><link href=https://www.linkedin.com/in/nikita-wootten/ rel=me><link href=https://mstdn.social/@nikitaw rel=me><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "c8303eac703c45b89db3207660f3a5a3"}'></script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold text-neutral-900 dark:text-neutral print:hidden sm:py-10"><nav class="flex items-start justify-between sm:items-center"><div class="z-40 flex flex-row items-center"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>nikita.computer</a></div><label id=menu-button for=menu-controller class="block sm:hidden"><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper class="fixed inset-0 z-30 invisible w-full h-full m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex flex-col w-full px-6 py-6 mx-auto overflow-visible list-none max-w-7xl ltr:text-right rtl:text-left sm:px-14 sm:py-10 sm:pt-10 md:px-24 lg:px-32"><li class=mb-1><span class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class="mb-1 group"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="mb-1 group"><button id=search-button-m0 title="Search (/)">
<span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></div></label><ul class="flex-row hidden list-none ltr:text-right rtl:text-left sm:flex"><li class="mb-1 group sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a href=/posts/ title=Posts><span class="decoration-primary-500 group-hover:underline group-hover:decoration-2 group-hover:underline-offset-2">Posts</span></a></li><li class="mb-1 group sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><button id=search-button-m1 title="Search (/)">
<span class="transition-colors group-dark:hover:text-primary-400 group-hover:text-primary-600"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></span></button></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/></a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/>Posts</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/posts/simple-ddns-k8s-cronjob/>Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Simply managing Dynamic DNS in Kubernetes using the CronJob resource and the CloudFlare API</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-12-01 22:49:07 -0500 -0500">1 December 2022</time><span class="px-2 text-primary-500">&#183;</span><span>1386 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span><span class="px-2 text-primary-500">&#183;</span>
<span class=mb-[2px]><a href=https://github.com/nikitawootten/nikitawootten.github.io/ class="text-lg hover:text-primary-500" rel="noopener noreferrer" target=_blank title="Edit content"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M490.3 40.4c21.9 21.87 21.9 57.33.0 79.2l-30 30.1-98-97.98 30.1-30.06C414.3-.2135 449.7-.2135 471.6 21.66L490.3 40.4zM172.4 241.7 339.7 74.34l98 97.96L270.3 339.6C264.2 345.8 256.7 350.4 248.4 353.2l-88.8 29.6C150.1 385.6 141.5 383.4 135 376.1 128.6 370.5 126.4 361 129.2 352.4l29.6-88.8C161.6 255.3 166.2 247.8 172.4 241.7v0zM192 63.1c17.7.0 32 15.23 32 32 0 18.6-14.3 32-32 32H96c-17.67.0-32 15.2-32 32V416c0 17.7 14.33 32 32 32H352c17.7.0 32-14.3 32-32V319.1c0-16.8 14.3-32 32-32s32 15.2 32 32V416c0 53-43 96-96 96H96c-53.02.0-96-43-96-96V159.1c0-53 42.98-96 96-96h96z"/></svg></span></a></span></div><div class="my-1 text-xs leading-relaxed text-neutral-500 dark:text-neutral-400"><a href=/tags/homelab/ class="rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">homelab</a>
<a href=/tags/kubernetes/ class="rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">kubernetes</a>
<a href=/tags/cloudflare/ class="rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">cloudflare</a>
<a href=/tags/dns/ class="rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">dns</a>
<a href=/tags/tutorial/ class="rounded-md border border-neutral-200 px-1 py-[1px] hover:border-primary-300 hover:text-primary-700 dark:border-neutral-600 dark:hover:border-primary-600 dark:hover:text-primary-400">tutorial</a></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#enter-the-cloudflare-api>Enter the Cloudflare API</a></li><li><a href=#how-do-we-even-know-what-our-public-ip-address-is>How do <em>we</em> even know what our public IP address is?</a></li><li><a href=#our-simple-bash-script>Our simple Bash script</a></li><li><a href=#enter-kubernetes>Enter Kubernetes</a><ul><li><a href=#the-configmap-resource>The <code>ConfigMap</code> resource</a></li><li><a href=#the-secret-resource>The <code>Secret</code> resource</a></li><li><a href=#the-cronjob-resource>The <code>CronJob</code> resource</a><ul><li><a href=#the-cron-part-of-a-cronjob>The <code>Cron</code> part of a <code>CronJob</code></a></li><li><a href=#the-job-part-of-a-cronjob>The <code>Job</code> part of a <code>CronJob</code></a></li></ul></li><li><a href=#creating-the-resource>Creating the resource</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose grow"><p>So, your ISP won&rsquo;t give you a static IP address for your burgeoning homelab&rsquo;s network?
Tired of telling friends what your IP address is every time they want to access your Minecraft server?
Dynamic DNS is an extremely simple solution to that problem.
The gist is, if you can&rsquo;t rely on a static IP address, just have your servers periodically tell a third party where they&rsquo;re located.</p><p>In this post I&rsquo;d like to share my exploration of Kubernetes and the CloudFlare API.</p><p>First of all I&rsquo;d like to emphasize that there are definitely easier ways to do this.
Many consumer (even ISP provided) routers can connect to services like <a href=https://www.noip.com/ target=_blank rel="noreferrer noopener">NoIp</a> and <a href=https://dyn.com/ target=_blank rel="noreferrer noopener">DynDNS</a> without any hassle, and it&rsquo;s trivial to spin up services like <a href=https://github.com/ddclient/ddclient target=_blank rel="noreferrer noopener">DDClient</a> in a Docker container or even packaged through your favorite Linux distribution.
I am running this in my Kubernetes cluster mostly out of curiosity.</p><p>I&rsquo;m sharing this post to show how simple it is to run jobs on a Kubernetes cluster using tools that you&rsquo;re most likely already familiar with (simple bash scripts can go a long way!).</p><h2 id=enter-the-cloudflare-api class="relative group">Enter the Cloudflare API <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#enter-the-cloudflare-api aria-label=Anchor>#</a></span></h2><p>You could use <a href=https://www.duckdns.org/ target=_blank rel="noreferrer noopener">DuckDNS</a>, <a href=https://cloud.google.com/dns target=_blank rel="noreferrer noopener">Google Cloud DNS</a>, <a href=https://aws.amazon.com/route53/ target=_blank rel="noreferrer noopener">AWS Route 53</a>, or really any service that offers you the ability to update DNS records programmatically.
I chose <a href=https://www.cloudflare.com/ target=_blank rel="noreferrer noopener">CloudFlare</a> because I already have a few domains managed by them.</p><p>Luckily, Cloudflare provides an easy to use API with <a href=https://developers.cloudflare.com/api/operations/dns-records-for-a-zone-update-dns-record target=_blank rel="noreferrer noopener">documentation and examples</a> on how to update a DNS record already provided:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># PUT https://api.cloudflare.com/client/v4/zones/{zone_identifier}/dns_records/{identifier}</span>
</span></span><span class=line><span class=cl>curl --request PUT <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --url https://api.cloudflare.com/client/v4/zones/zone_identifier/dns_records/identifier <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --header <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --header <span class=s1>&#39;X-Auth-Email: &#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --data <span class=s1>&#39;{
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;content&#34;: &#34;198.51.100.4&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;name&#34;: &#34;example.com&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;proxied&#34;: false,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;type&#34;: &#34;A&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;comment&#34;: &#34;Domain verification record&#34;,
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;tags&#34;: [
</span></span></span><span class=line><span class=cl><span class=s1>      &#34;owner:dns-team&#34;
</span></span></span><span class=line><span class=cl><span class=s1>    ],
</span></span></span><span class=line><span class=cl><span class=s1>    &#34;ttl&#34;: 3600
</span></span></span><span class=line><span class=cl><span class=s1>  }&#39;</span>
</span></span></code></pre></div><p>So like 70% of the work is already done for us, great! <em>(unfortunately their example is not perfect, and led me to quite a bit of debugging)</em></p><p>Let&rsquo;s break down their example:</p><ul><li><p>We need to make a <code>PUT</code> request to <code>https://api.cloudflare.com/client/v4/zones/{zone_identifier}/dns_records/{identifier}</code>, filling in values for <code>zone_identifier</code> and <code>identifier</code></p><ul><li><p><code>zone_identifier</code> seems to be a <a href=https://developers.cloudflare.com/fundamentals/get-started/basic-tasks/find-account-and-zone-ids/ target=_blank rel="noreferrer noopener">special ID given to each domain</a>.</p></li><li><p><code>identifier</code> is a bit more mysterious. It seems that an <code>identifier</code> is given to each DNS entry, but CloudFlare&rsquo;s dashboard unhelpfully does not tell you what the record identifiers are.</p><p>To get around this, you can either make an API request to Cloudflare that <a href=https://developers.cloudflare.com/api/operations/dns-records-for-a-zone-list-dns-records target=_blank rel="noreferrer noopener">lists your DNS records for a domain</a>, or you can try updating a record manually with your browser&rsquo;s network tab open to intercept requests. I chose the ladder.</p></li></ul></li><li><p>We&rsquo;ll need to authenticate our requests.</p><p>I didn&rsquo;t have luck getting Cloudflare&rsquo;s key-based authentication working, but their <a href=https://developers.cloudflare.com/fundamentals/api/get-started/create-token/ target=_blank rel="noreferrer noopener">token-based authentication</a> worked without any problems.</p><p>For token-based authentication we just provide a <a href=https://swagger.io/docs/specification/authentication/bearer-authentication/ target=_blank rel="noreferrer noopener">bearer token</a> in the <code>Authorization</code> header.</p></li><li><p>The body of the request is fairly simple:</p><ul><li>We provide the name of the record we&rsquo;d like to update, the type of record and the IP address we&rsquo;d like to set it to</li><li>The record can be tagged with metadata through the <code>comment</code> and <code>tags</code> fields</li><li>We can specify a <code>TTL</code>, or <a href=https://en.wikipedia.org/wiki/Time_to_live target=_blank rel="noreferrer noopener">Time to Live</a> to control how frequently client DNS caches invalidate (the value they&rsquo;ve provided here is fine)</li></ul></li></ul><h2 id=how-do-we-even-know-what-our-public-ip-address-is class="relative group">How do <em>we</em> even know what our public IP address is? <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#how-do-we-even-know-what-our-public-ip-address-is aria-label=Anchor>#</a></span></h2><p>Funny enough, the easiest way to find your public IP address is to ask someone else:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>IP_ADDRESS</span><span class=o>=</span><span class=k>$(</span>curl https://domains.google.com/checkip<span class=k>)</span>
</span></span></code></pre></div><h2 id=our-simple-bash-script class="relative group">Our simple Bash script <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#our-simple-bash-script aria-label=Anchor>#</a></span></h2><p>If you throw everything we&rsquo;ve learned so far at the screen you&rsquo;ll probably arrive at a bash script that looks something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>IP</span><span class=o>=</span><span class=k>$(</span>curl <span class=nv>$CHECK_IP</span><span class=k>)</span>
</span></span><span class=line><span class=cl>curl --request PUT --url https://api.cloudflare.com/client/v4/zones/<span class=nv>$ZONE_ID</span>/dns_records/<span class=nv>$RECORD_ID</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --header <span class=s1>&#39;Content-Type: application/json&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --header <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$API_KEY</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --data <span class=s2>&#34;{
</span></span></span><span class=line><span class=cl><span class=s2>    \&#34;content\&#34;: \&#34;</span><span class=nv>$IP</span><span class=s2>\&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>    \&#34;name\&#34;: \&#34;</span><span class=nv>$NAME</span><span class=s2>\&#34;,
</span></span></span><span class=line><span class=cl><span class=s2>    \&#34;proxied\&#34;: </span><span class=nv>$PROXIED</span><span class=s2>,
</span></span></span><span class=line><span class=cl><span class=s2>    \&#34;ttl\&#34;: </span><span class=nv>$TTL</span><span class=s2>,
</span></span></span><span class=line><span class=cl><span class=s2>    \&#34;type\&#34;: \&#34;</span><span class=nv>$TYPE</span><span class=s2>\&#34;
</span></span></span><span class=line><span class=cl><span class=s2>  }&#34;</span>
</span></span></code></pre></div><p>Fill in the appropriate environment variables and with luck you&rsquo;ve witnessed your DNS become <em>dynamic</em>.</p><p>Now, we could stop here and throw this script in a cronjob, or a systemd service unit, but if you&rsquo;re like me you already have a Kubernetes cluster laying around, so you might as well use it to manage things right?</p><h2 id=enter-kubernetes class="relative group">Enter Kubernetes <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#enter-kubernetes aria-label=Anchor>#</a></span></h2><p>This script involves three simple Kubernetes resources:</p><ul><li>A <a href=https://kubernetes.io/docs/concepts/configuration/configmap/ target=_blank rel="noreferrer noopener"><code>ConfigMap</code></a> resource containing our simple bash script.</li><li>A <a href=https://kubernetes.io/docs/concepts/configuration/secret/ target=_blank rel="noreferrer noopener"><code>Secret</code></a> resource containing the sensitive environment variables that the script relies on.</li><li>A <a href=https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/ target=_blank rel="noreferrer noopener"><code>CronJob</code></a> resource, which fittingly creates <a href=https://kubernetes.io/docs/concepts/workloads/controllers/job/ target=_blank rel="noreferrer noopener"><code>Job</code></a> resources on a schedule.</li></ul><h3 id=the-configmap-resource class="relative group">The <code>ConfigMap</code> resource <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-configmap-resource aria-label=Anchor>#</a></span></h3><p><code>ConfigMaps</code> are one of the easier Kubernetes resources to understand.
Fundamentally they just store maps (key-value pairs) of data that can be consumed by other resources.</p><p>In this case, I am using the <code>ConfigMap</code> to store the script that I <a href=#our-simple-bash-script>derived in the last section</a>.
This <code>ConfigMap</code> is meant to be mounted onto a container as files, but ConfigMaps can be used in other ways like injecting environment variables into a container.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># cloudflare-ddns-cronjob.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-script-configmap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run.sh</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>    IP=$(curl $CHECK_IP)
</span></span></span><span class=line><span class=cl><span class=sd>    curl --request PUT --url https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$RECORD_ID \
</span></span></span><span class=line><span class=cl><span class=sd>    --header &#39;Content-Type: application/json&#39; \
</span></span></span><span class=line><span class=cl><span class=sd>    --header &#34;Authorization: Bearer $API_KEY&#34; \
</span></span></span><span class=line><span class=cl><span class=sd>    --data &#34;{
</span></span></span><span class=line><span class=cl><span class=sd>      \&#34;content\&#34;: \&#34;$IP\&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>      \&#34;name\&#34;: \&#34;$NAME\&#34;,
</span></span></span><span class=line><span class=cl><span class=sd>      \&#34;proxied\&#34;: $PROXIED,
</span></span></span><span class=line><span class=cl><span class=sd>      \&#34;ttl\&#34;: $TTL,
</span></span></span><span class=line><span class=cl><span class=sd>      \&#34;type\&#34;: \&#34;$TYPE\&#34;
</span></span></span><span class=line><span class=cl><span class=sd>    }&#34;</span><span class=w>    
</span></span></span></code></pre></div><h3 id=the-secret-resource class="relative group">The <code>Secret</code> resource <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-secret-resource aria-label=Anchor>#</a></span></h3><p>Kubernetes <code>Secrets</code> are very similar in concept to a <code>ConfigMap</code>, but they are intended to be used to store sensitive variables.</p><p><em>Note: <code>Secrets</code> are not any more secure then a <code>ConfigMap</code> by default, but with some hardening (encryption at rest & access control with RBAC, retrieval through the K8s API instead of as environment variables) they can be made much more secure.
<a href=https://snyk.io/blog/using-kubernetes-configmaps-securely/ target=_blank rel="noreferrer noopener">Snyk&rsquo;s article</a> on the subject is a great introduction.</em></p><p>In this case I am using the secrets to inject environment variables needed by the script to function:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># cloudflare-ddns-cronjob.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>stringData</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ZONE_ID</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w> </span><span class=c># redacted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>RECORD_ID</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w> </span><span class=c># redacted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>NAME</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;example.com&#34;</span><span class=w> </span><span class=c># redacted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TYPE</span><span class=p>:</span><span class=w> </span><span class=l>A</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>PROXIED</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>TTL</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;300&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>API_KEY</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w> </span><span class=c># redacted</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>CHECK_IP</span><span class=p>:</span><span class=w> </span><span class=l>https://domains.google.com/checkip</span><span class=w>
</span></span></span></code></pre></div><h3 id=the-cronjob-resource class="relative group">The <code>CronJob</code> resource <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-cronjob-resource aria-label=Anchor>#</a></span></h3><p>The <code>CronJob</code> resource is the most complex of the 3, and to be fair there&rsquo;s a lot going on here:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=c># cloudflare-ddns-cronjob.yaml</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>batch/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>CronJob</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>concurrencyPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Forbid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>failedJobsHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>successfulJobsHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>startingDeadlineSeconds</span><span class=p>:</span><span class=w> </span><span class=m>60</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;*/5 * * * *&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>jobTemplate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-job</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>activeDeadlineSeconds</span><span class=p>:</span><span class=w> </span><span class=m>240</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>backoffLimit</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-job-pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-job-container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>fedora:36</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;bash&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;/scripts/run.sh&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>envFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span>- <span class=nt>secretRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>script-volume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/scripts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>script-volume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>configMap</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-script-configmap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>OnFailure</span><span class=w>
</span></span></span></code></pre></div><h4 id=the-cron-part-of-a-cronjob class="relative group">The <code>Cron</code> part of a <code>CronJob</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-cron-part-of-a-cronjob aria-label=Anchor>#</a></span></h4><p>From the top, first we define some properties about scheduling these jobs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>concurrencyPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Forbid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>failedJobsHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>successfulJobsHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>startingDeadlineSeconds</span><span class=p>:</span><span class=w> </span><span class=m>60</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>schedule</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;*/5 * * * *&#34;</span><span class=w>
</span></span></span></code></pre></div><p>Even without additional documentation it&rsquo;s fairly clear what these do.</p><ul><li>We don&rsquo;t want multiple DDNS updates happening simultaneously, so we forbid concurrency.</li><li>We don&rsquo;t want to fill up our history with jobs, so we only keep the last 5 working and 5 failed jobs.</li><li>Finally we set the <code>CronJob</code> to create <code>Jobs</code> on an interval using the <a href=https://crontab.guru/#*/5_*_*_*_* target=_blank rel="noreferrer noopener">cron expression format</a> (in this case we&rsquo;re just saying &ldquo;run every 5 minutes&rdquo;).</li></ul><h4 id=the-job-part-of-a-cronjob class="relative group">The <code>Job</code> part of a <code>CronJob</code> <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-job-part-of-a-cronjob aria-label=Anchor>#</a></span></h4><p>Our <code>CronJob</code> emits a <code>Job</code> on a schedule, but what do jobs look like?</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-job-container</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>fedora:36</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>command</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;bash&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;/scripts/run.sh&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>envFrom</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>secretRef</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-secret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumeMounts</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>script-volume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>mountPath</span><span class=p>:</span><span class=w> </span><span class=l>/scripts</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>script-volume</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>configMap</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>cloudflare-ddns-script-configmap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>OnFailure</span><span class=w>
</span></span></span></code></pre></div><p>Our job consists of one container running Fedora 36.
It&rsquo;ll run the command <code>/scripts/run.sh</code>, which is injected via the <code>ConfigMap</code> via a volume mount.
Environment variables will be passed in using the <code>Secret</code>.</p><h3 id=creating-the-resource class="relative group">Creating the resource <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#creating-the-resource aria-label=Anchor>#</a></span></h3><p>Now that we have all of our actors, the last step is to create the resources in Kubernetes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># optionally create a namespace for our resource first</span>
</span></span><span class=line><span class=cl>kubectl create namespace cloudflare-ddns
</span></span><span class=line><span class=cl><span class=c1># (remove the -n argument to put it on the default namespace)</span>
</span></span><span class=line><span class=cl>kubectl apply -n cloudflare-ddns -f cloudflare-ddns-cronjob.yaml
</span></span></code></pre></div><p>If all goes well you should start to see jobs running (and hopefully succeeding) periodically:</p><figure><img class="mx-auto my-0 rounded-md" alt srcset="/posts/simple-ddns-k8s-cronjob/images/dashboard_hu69572e59d00a8c6886ba03316b6a21c1_225335_330x0_resize_box_3.png 330w,
/posts/simple-ddns-k8s-cronjob/images/dashboard_hu69572e59d00a8c6886ba03316b6a21c1_225335_660x0_resize_box_3.png 660w,
/posts/simple-ddns-k8s-cronjob/images/dashboard_hu69572e59d00a8c6886ba03316b6a21c1_225335_1024x0_resize_box_3.png 1024w,
/posts/simple-ddns-k8s-cronjob/images/dashboard_hu69572e59d00a8c6886ba03316b6a21c1_225335_1320x0_resize_box_3.png 2x" src=/posts/simple-ddns-k8s-cronjob/images/dashboard_hu69572e59d00a8c6886ba03316b6a21c1_225335_660x0_resize_box_3.png><figcaption class=text-center>My Kubernetes dashboard after the Cronjob has run a few times</figcaption></figure><p>Old jobs are cleaned up according to the <code>failedJobsHistoryLimit</code> and <code>successfulJobsHistoryLimit</code> parameters you have set in the <code>CronJob</code> resource.</p><h2 id=conclusion class="relative group">Conclusion <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#conclusion aria-label=Anchor>#</a></span></h2><p>In this blog post we&rsquo;ve explored:</p><ul><li>Why Dynamic DNS is used and how it works</li><li>How to use services like Cloudflare to roll your own Dynamic DNS</li><li>Some basic Kubernetes resources and how they fit in your toolbox to get things done</li></ul><p>The full Kubernetes manifest can be found <a href=https://gist.github.com/nikitawootten/16125951b35224cd4f1a7934bbbface9 target=_blank rel="noreferrer noopener">at this GitHub gist</a>.</p></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Nikita Wootten" src=/img/lucya_huff674df71d5f4b525de779cc99124df9_346497_192x192_fill_box_smart1_3.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Nikita Wootten</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=mailto:stdin@nikita.computer target=_blank aria-label=Email rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/nikitawootten target=_blank aria-label=Github rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://github.com/nikitawootten-nist target=_blank aria-label=Github rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://www.linkedin.com/in/nikita-wootten/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a><a class="px-1 transition-transform hover:scale-125 hover:text-primary-700 dark:hover:text-primary-400" style=will-change:transform href=https://mstdn.social/@nikitaw target=_blank aria-label=Mastodon rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></span></a></div></div></div></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://tootpick.org/#text=https://nikita.computer/posts/simple-ddns-k8s-cronjob/%20Simply%20managing%20Dynamic%20DNS%20in%20Kubernetes%20using%20the%20CronJob%20resource%20and%20the%20CloudFlare%20API" title="Toot on Mastodon" aria-label="Toot on Mastodon"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://nikita.computer/posts/simple-ddns-k8s-cronjob/&amp;resubmit=true&amp;title=Simply%20managing%20Dynamic%20DNS%20in%20Kubernetes%20using%20the%20CronJob%20resource%20and%20the%20CloudFlare%20API" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://nikita.computer/posts/simple-ddns-k8s-cronjob/&amp;title=Simply%20managing%20Dynamic%20DNS%20in%20Kubernetes%20using%20the%20CronJob%20resource%20and%20the%20CloudFlare%20API" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a><a class="m-1 inline-block min-w-[2.4rem] rounded bg-neutral-300 p-1 text-center text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://nikita.computer/posts/simple-ddns-k8s-cronjob/&amp;subject=Simply%20managing%20Dynamic%20DNS%20in%20Kubernetes%20using%20the%20CronJob%20resource%20and%20the%20CloudFlare%20API" title="Send via email" aria-label="Send via email"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></a></section><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="group flex" href=/posts/dotfiles/><span class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">How I manage my dotfiles with Ansible</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-05-29 18:09:33 -0400 -0400">29 May 2022</time></span></span></a></span>
<span><a class="group flex text-right" href=/posts/hugo-openring/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Configuring my Congo themed Hugo blog to use Openring</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-12-03 18:26:40 -0500 -0500">3 December 2022</time></span></span>
<span class="ml-2 text-neutral-700 transition-transform group-hover:translate-x-[2px] group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-2 text-neutral-700 transition-transform group-hover:-translate-x-[2px] group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div><div class=pt-3><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class=pt-3><script src=https://giscus.app/client.js data-repo=nikitawootten/nikitawootten.github.io data-repo-id=R_kgDOHRFEvA data-category=Article data-category-id=DIC_kwDOHRFEvM4CTkK0 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script></div></div></footer></article></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">The content for this site is <a href=https://creativecommons.org/licenses/by/2.0/ target=_blank rel="noreferrer noopener">CC-BY 2.0</a>, the <a href=https://github.com/nikitawootten/nikitawootten.github.io target=_blank rel="noreferrer noopener">code</a> is <a href=https://github.com/nikitawootten/nikitawootten.github.io/blob/main/LICENSE target=_blank rel="noreferrer noopener">MIT</a></p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div></div><div class=mt-6><section class=webring><h3>Articles from blogs I follow around the net:</h3><section class="flex flex-wrap"><div class="article flex flex-col m-1 p-1 bg-neutral-300 dark:bg-neutral-600"><h4 class=m-0><a href=https://xeiaso.net/blog/nosleep target=_blank rel=noopener>Time is not a synchronization primitive</a></h4><p class=summary>Programming is so complicated. I know this is an example of the
nostalgia paradox in action, but it easily feels like everything has
gotten so much more complicated over the course of my career. One of
the biggest things that is really complicated is the fac</p><small>via <a href=https://xeiaso.net/blog>Xe's Blog</a></small>
<small>June 25, 2023</small></div><div class="article flex flex-col m-1 p-1 bg-neutral-300 dark:bg-neutral-600"><h4 class=m-0><a href=https://jvns.ca/blog/2023/06/23/new-zine--how-integers-and-floats-work/ target=_blank rel=noopener>New zine: How Integers and Floats Work</a></h4><p class=summary>Hello! On Wednesday, we released a new zine: How Integers and Floats Work!
You can get it for $12 here:
https://wizardzines.com/zines/integers-floats, or get
an 13-pack of all my zines here.
Heres the cover:
the table of contents
Heres the table of contents!
</p><small>via <a href=http://jvns.ca>Julia Evans</a></small>
<small>June 23, 2023</small></div><div class="article flex flex-col m-1 p-1 bg-neutral-300 dark:bg-neutral-600"><h4 class=m-0><a href=https://drewdevault.com/2023/06/19/Reforming-the-free-software-message.html target=_blank rel=noopener>Reforming the free software message</a></h4><p class=summary>Several weeks ago, I wrote The Free Software Foundation is dying, wherein I
enumerated a number of problems with the Free Software Foundation. Some of my
criticisms focused on the message: fsf.org and gnu.org together suffer from no
small degree of incompreh</p><small>via <a href=https://drewdevault.com>Drew DeVault's blog</a></small>
<small>June 19, 2023</small></div></section><p class="text-sm text-neutral-500 dark:text-neutral-400 text-right">Generated by
<a href=https://git.sr.ht/~sircmpwn/openring>openring</a></p></section><style>.webring .article{flex:1;min-width:10rem}.webring .summary{flex:1;font-size:.8rem}</style></div></footer><div id=search-wrapper class="invisible fixed inset-0 z-50 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://nikita.computer/><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>